import{u as E,r as t,j as s,c as O,R as $}from"./store-cylqlXLn.js";function R(){const{notes:h,setNotes:b,loadNotes:N,saveNotes:v,sessions:x,loadSessions:j,saveSession:S,restoreSession:g,deleteSession:y}=E(),[o,i]=t.useState(""),[c,l]=t.useState(!1),[r,d]=t.useState(!1),[n,m]=t.useState("sessions");t.useEffect(()=>{N(),j()},[]);const p=async()=>{const e=o.trim()||`session-${Date.now()}`;chrome.tabs.query({currentWindow:!0},async a=>{const k=a.map(w=>w.url).filter(Boolean);await S(e,k),i(""),d(!0),setTimeout(()=>d(!1),2e3)})},f=async()=>{await v(),l(!0),setTimeout(()=>l(!1),2e3)},C=()=>{chrome.runtime.openOptionsPage()},u=Object.entries(x);return s.jsxs("div",{className:"popup-container",children:[s.jsxs("header",{className:"popup-header",children:[s.jsxs("div",{className:"popup-logo",children:[s.jsx("span",{className:"logo-icon",children:"⚡"}),s.jsx("span",{className:"logo-text",children:"Productivity Suite"})]}),s.jsx("button",{className:"btn btn-ghost btn-sm","data-testid":"open-options-btn",onClick:C,title:"Open Options",children:"⚙️"})]}),s.jsxs("nav",{className:"popup-tabs",children:[s.jsx("button",{className:`tab-btn ${n==="sessions"?"active":""}`,onClick:()=>m("sessions"),children:"Tabs"}),s.jsx("button",{className:`tab-btn ${n==="notes"?"active":""}`,onClick:()=>m("notes"),children:"Notes"})]}),n==="sessions"&&s.jsxs("div",{className:"tab-content",children:[s.jsxs("div",{className:"save-session-row",children:[s.jsx("input",{type:"text",className:"input-field",placeholder:"Session name...",value:o,onChange:e=>i(e.target.value),onKeyDown:e=>e.key==="Enter"&&p()}),s.jsx("button",{className:`btn btn-primary ${r?"btn-success":""}`,"data-testid":"save-session-btn",onClick:p,children:r?"✓ Saved":"Save"})]}),s.jsx("div",{className:"sessions-list","data-testid":"sessions-list",children:u.length===0?s.jsx("p",{className:"empty-state",children:"No saved sessions yet."}):u.map(([e,a])=>s.jsxs("div",{className:"session-card",children:[s.jsxs("div",{className:"session-info",children:[s.jsx("span",{className:"session-name",children:e}),s.jsxs("span",{className:"session-meta",children:[a.length," tab",a.length!==1?"s":""]})]}),s.jsxs("div",{className:"session-actions",children:[s.jsx("button",{className:"btn btn-accent btn-sm","data-testid":`restore-session-${e}`,onClick:()=>g(e),children:"Restore"}),s.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>y(e),children:"✕"})]})]},e))})]}),n==="notes"&&s.jsxs("div",{className:"tab-content",children:[s.jsx("textarea",{className:"notes-textarea","data-testid":"notes-textarea",placeholder:"Write your notes here...",value:h,onChange:e=>b(e.target.value)}),s.jsx("button",{className:`btn btn-primary btn-full ${c?"btn-success":""}`,"data-testid":"save-notes-btn",onClick:f,children:c?"✓ Notes Saved":"Save Notes"})]})]})}O.createRoot(document.getElementById("popup-root")).render(s.jsx($.StrictMode,{children:s.jsx(R,{})}));
